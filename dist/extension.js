(()=>{"use strict";var e={144:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=o(496),r=o(593);e.exports=function(e){let t=n.commands.registerCommand("yapi-json-model.jsonModelAll",(e=>{const t=n.window.activeTextEditor.document,o=t.getText(t.getWordRangeAtPosition(new n.Position(t.lineCount+1,0))),s=r.removeHeaderNotes(o);if(r.isJSON(s))if(r.judgeCanTransfomer(s)){const e=r.createModelFile(s,!0);n.window.activeTextEditor.edit((t=>{const o=new n.Position(n.window.activeTextEditor.document.lineCount+1,0);t.replace(new n.Range(new n.Position(0,0),o),e)}))}else n.window.showInformationMessage("当前JSON字符串不满足可以转化格式要求，请检查JSON格式");else n.window.showInformationMessage("请输入正确的JSON字符串")}));e.subscriptions.push(t)}},862:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=o(496),r=o(593);e.exports=function(e){let t=n.commands.registerCommand("yapi-json-model.jsonModelSelect",(e=>{const t=n.window.activeTextEditor,o=t.document,s=t.selection.start,i=t.selection.end,c=o.getText(new n.Range(s.line,s.character,i.line,i.character)),a=r.removeHeaderNotes(c);if(r.isJSON(a))if(r.judgeCanTransfomer(a)){const e=r.createModelFile(a,!1);n.window.activeTextEditor.edit((t=>{t.replace(new n.Range(s,i),e)}))}else n.window.showInformationMessage("当前JSON字符串不满足可以转化格式要求，请检查JSON格式");else n.window.showInformationMessage("请输入正确的JSON字符串")}));e.subscriptions.push(t)}},593:e=>{const t={upperFirstLetter:e=>(e||"").replace(/^\w/,(e=>e.toUpperCase())),removeHeaderNotes(e){if(e.startsWith("/*")){const t=e.indexOf("*/");return e.substr(t+2,e.length-t-2)}return e},isJSON(e){if("string"==typeof e)try{const t=JSON.parse(e);return!("object"!=typeof t||!t)}catch(e){return!1}return!1},judgeCanTransfomer(e){const t=JSON.parse(e),o=Object.keys(t);if(1===o.length){const e=t[o[0]];if(e.type&&("object"===e.type||"array"===e.type))return!0}return!1},createModelFile(e,t){const o=JSON.parse(e),n=this.createModelDto(o);return t?`import { Type } from 'class-transformer'; \n \n${n}`:n},createModelDto(e){let t="";const o=Object.keys(e),n=e[o[0]];if("object"===n.type){const e=n.properties;t+=`${this.createDtoStr(o[0],e)} \n`}else if("array"===n.type){const e=n.items;t=`export class ${o[0]}Dto { \n`,"object"===e.type?(t+="@Type(() => ItemsDto) \n",t+="public items?: ItemsDto;\n",t+="} \n",t+=`${this.createDtoStr("items",e.properties)} \n`):(t+=`public items?: ${e.type}[]; \n`,t+="} \n")}return t},createDtoStr(e,o){let n=`export class ${t.upperFirstLetter(e)}Dto { \n`;const r=Object.keys(o);let s=[];return r.map((e=>{const r=o[e],i=t.upperFirstLetter(e);if(r.title?n+=`// ${r.title} \n`:r.description&&(n+=`// ${r.description} \n`),"object"===r.type){n+=`@Type(() => ${i}Dto) \n`,n+=`public ${e}?: ${i}Dto;\n`;const t=r.properties;s.push({objName:e,subObj:t})}else if("array"===r.type){const t=r.items;if("object"===t.type){n+=`@Type(() => ${i}Dto) \n`,n+=`public ${e}?: ${i}Dto[];\n`;const o=t.properties;s.push({objName:e,subObj:o})}else n+=`public ${e}?: ${t.type}[]; \n`}else"string"===r.type?n+=`public ${e}?: string; \n`:"number"===r.type?n+=`public ${e}?: number; \n`:"boolean"===r.type&&(n+=`public ${e}?: boolean; \n`)})),n+="} \n",s.map((e=>{const t=this.createDtoStr(e.objName,e.subObj);n+=`\n${t} \n`})),n}};e.exports=t},496:e=>{e.exports=require("vscode")}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,o),s.exports}var n,r={};n=r,Object.defineProperty(n,"__esModule",{value:!0}),n.deactivate=n.activate=void 0,o(593),n.activate=function(e){console.log('Congratulations, your extension "zhoupu-json-model" is now active!'),o(144)(e),o(862)(e)},n.deactivate=function(){},module.exports=r})();